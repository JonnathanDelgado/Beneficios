<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Partners · Gpon</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-HXr7+Xw5l4kz0Uht5Ec3hFW+e5kZ3Q52TnPGyY2IpbXfS5mDmyZgZ2h8u9JjHnTtL7VYoY3Su+FjAqgX3vsUqw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
  <style>
    /* Solo añadimos este estilo para controlar la visibilidad del botón */
    #consultBtn {
      display: none;
    }
    
    #consultBtn.visible {
      display: block;
    }
  </style>
</head>
<body>

<header class="topbar">
  <div class="brand">
    <div class="logo"><img src="/static/conten/Gponblack.svg" alt=""></div>
    <div class="sub"><img src="/static/conten/forpartnersblack.svg" alt=""></div>
  </div>
  <nav class="top-actions">
    <a class="btn btn-outline" href="{{ url_for('logout') }}">Cerrar sesión<img src="/static/conten/ph_sign-out-thin.svg" alt=""></a>

  </nav>
</header>

<main class="container">

  <section class="hero">
    <h1>Bienvenido, <span class="username">@{{ session.get('user', 'name') }}</span>!</h1>
    <p class="lead">
      Selecciona un partner para realizar la consulta asociada a tus alianzas.
    </p>

    <div class="grid">
      <!-- Selector de partners -->
      <div class="card">
        <h3>Consulta por partner</h3>

        <form method="post" action="{{ url_for('consultar_partner') }}" class="verify-form" id="partnerForm">
          <label>
            <img src="/static/conten/perfil.png" alt="">
            <select name="partner_id" id="partnerSelect" required>
              <option value="" >— Selecciona un partner —</option>
              {# partners es una lista de dicts con id y nombre #}
              {% for p in partners %}
                <option value="{{ p.id }}">{{ p.nombre }}</option>
              {% endfor %}
            </select>
          </label>

          <button type="submit" class="btn btn-primary" id="consultBtn">Consultar</button>

        </form>
      </div>

      <!-- Lado derecho con imagen (reutilizamos tu preview) -->
      <div class="preview">
        <img src="{{ url_for('static', filename='img/hoja.png') }}" alt="Vista de Excel de ejemplo">
      </div>
    </div>

  </section>
</main>

<footer class="footer">Gpon</footer>

<!-- JS: ocultar/mostrar botón según selección -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const select = document.getElementById("partnerSelect");
    const btn = document.getElementById("consultBtn");

    // Estado inicial: botón oculto
    // (ya está oculto por el CSS)

    // Alterna visibilidad según la selección
    select.addEventListener("change", () => {
      if (select.value) {
        // Si hay un valor seleccionado (diferente de la opción por defecto), mostrar botón
        btn.classList.add('visible');
      } else {
        // Si no hay valor seleccionado, ocultar botón
        btn.classList.remove('visible');
      }
    });
  });
</script>

</body>
</html>